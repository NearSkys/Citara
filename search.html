<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Citara - Academic Citation Search</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
</head>

<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-left">
                <div class="logo-area">
                    <span class="material-symbols-outlined logo-icon">local_library</span>
                    <h2 class="logo-text">Citara</h2>
                </div>
                <nav class="nav-pills">
                    <a class="nav-link" href="graph.html">Graph View</a>
                    <a class="nav-link" href="list.html">List View</a>
                    <a class="nav-link active" href="#">Search</a>
                </nav>
            </div>
            <div class="header-right">
                <button class="btn btn-primary-light" data-modal="upload">
                    <span class="material-symbols-outlined">upload_file</span>
                    <span>Upload PDF</span>
                </button>
                <button class="btn btn-primary">
                    <span class="material-symbols-outlined">add_circle</span>
                    <span>Add Citation</span>
                </button>
                <button class="btn-icon" data-modal="settings">
                    <span class="material-symbols-outlined">settings</span>
                </button>
            </div>
        </header>

        <div class="main-content">
            <aside class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-header">
                        <h3 class="sidebar-title">Projects</h3>
                        <button class="btn-icon" style="width: auto; height: auto;">
                            <span class="material-symbols-outlined">menu_open</span>
                        </button>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 0.25rem;">
                        <a class="nav-item active" href="#">
                            <span>Thesis Chapter 1</span>
                            <span class="material-symbols-outlined more-icon">more_horiz</span>
                        </a>
                        <a class="nav-item" href="#">
                            <span>Lit Review - AI Ethics</span>
                            <span class="material-symbols-outlined more-icon">more_horiz</span>
                        </a>
                        <a class="nav-item" href="#">
                            <span>Project Neurovis</span>
                            <span class="material-symbols-outlined more-icon">more_horiz</span>
                        </a>
                        <a class="nav-item" href="#">
                            <span>Quantum Computing Paper</span>
                            <span class="material-symbols-outlined more-icon">more_horiz</span>
                        </a>
                    </div>
                </div>
                <div class="sidebar-section">
                    <button class="btn btn-primary-light" style="width: 100%;" data-modal="add-project">
                        <span class="material-symbols-outlined">add</span>
                        <span>New Project</span>
                    </button>
                </div>
            </aside>

            <div class="scrollable-area">
                <div style="padding: 2.5rem; display: flex; flex-direction: column; gap: 2rem;">
                    <div style="max-width: 48rem; margin: 0 auto; width: 100%; text-align: center;">
                        <h1 class="font-bold" style="font-size: 1.5rem; margin-bottom: 0.5rem;">Discover Academic
                            Articles</h1>
                        <p style="color: var(--text-muted);">Search for articles using Semantic Scholar or our
                            AI-powered model.</p>
                    </div>

                    <div
                        style="max-width: 48rem; margin: 0 auto; width: 100%; display: flex; flex-direction: column; gap: 1rem; align-items: center;">
                        <div class="search-container" style="width: 100%; display:flex; align-items:center; gap:0.75rem;">
                            <button class="btn btn-outline" data-modal="filters_search" aria-label="Open filters" style="flex:0 0 auto; margin-left:0.25rem;">
                                <span class="material-symbols-outlined">filter_list</span>
                            </button>
                            <div style="flex:1; position:relative;">
                              <span class="material-symbols-outlined search-icon" style="font-size: 1.5rem; position:absolute; left:0.9rem; top:50%; transform:translateY(-50%);">search</span>
                              <input class="search-input"
                                  style="padding-left: 3.5rem; padding-top: 0.75rem; padding-bottom: 0.75rem; font-size: 1rem; border-radius: var(--radius-full); width:100%;"
                                  placeholder="Enter keywords, author, DOI, or title" />
                            </div>
                        </div>

                        <div id="search-mode-row"
                            style="width: 100%; display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span class="text-sm font-medium" style="color: var(--text-muted);">AI Search</span>
                                <div id="ai-toggle" class="toggle-switch" role="switch" aria-checked="false"
                                    data-mode="semantic">
                                    <span class="toggle-thumb"></span>
                                </div>
                                <select id="ai-model-select" class="search-input form-select"
                                    style="display:none; width: 10rem; margin-left: 0.5rem;">
                                    <option>Gemini</option>
                                    <option>GPT</option>
                                    <option>OpenRouter</option>
                                </select>
                            </div>
                            <div id="powered-by" class="text-sm" style="color: var(--text-muted);">Powered by <span
                                    class="font-bold">Semantic Scholar</span></div>
                        </div>
                    </div>

                    <div style="border-top: 1px solid var(--neutral-200); padding-top: 1.5rem;">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <h3 class="text-lg font-bold">Search Results</h3>
                            <p class="text-sm" style="color: var(--text-muted);">Showing 1-10 of 1,234 results</p>
                        </div>

                        <div id="search-results" style="display: flex; flex-direction: column; gap: 1rem;"></div>

                        <div id="search-pagination" style="margin-top: 1.5rem; display: flex; justify-content: center;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/modals.js" defer></script>
    <script type="module" src="js/api.js" defer></script>
    <script type="module" src="js/utils.js" defer></script>
    <script type="module" src="js/search-page.js" defer></script>
    <script type="module" src="js/filters-modal-search.js" defer></script>
    <script type="module" src="js/upload-modal.js" defer></script>
    <script type="module" src="js/settings-modal.js" defer></script>
    <script>
        (function () {
            const toggle = document.getElementById('ai-toggle');
            const powered = document.getElementById('powered-by');
            const modelSelect = document.getElementById('ai-model-select');

            function setAIMode(on) {
                if (on) {
                    document.documentElement.classList.add('ai-mode');
                    toggle.setAttribute('aria-checked', 'true');
                    toggle.dataset.mode = 'ai';
                    powered.innerHTML = 'Powered by <span class="font-bold">AI Model</span>';
                    modelSelect.style.display = 'inline-block';
                    // adjust placeholder/size of main input if desired
                } else {
                    document.documentElement.classList.remove('ai-mode');
                    toggle.setAttribute('aria-checked', 'false');
                    toggle.dataset.mode = 'semantic';
                    powered.innerHTML = 'Powered by <span class="font-bold">Semantic Scholar</span>';
                    modelSelect.style.display = 'none';
                }
                // emit event for other scripts
                document.dispatchEvent(new CustomEvent('search:mode', { detail: { ai: on } }));
            }

            // initialize from URL param ?ai=1 or from saved preference
            function getInitial() {
                try {
                    const url = new URL(location.href);
                    if (url.searchParams.get('ai') === '1') return true;
                } catch (e) { }
                const pref = localStorage.getItem('search.ai') === '1';
                return pref;
            }

            // click handler toggles mode
            toggle.addEventListener('click', function () {
                const on = toggle.getAttribute('aria-checked') === 'true';
                setAIMode(!on);
                localStorage.setItem('search.ai', (!on) ? '1' : '0');
            });

            // start
            setAIMode(getInitial());
        })();
    </script>
</body>

</html>